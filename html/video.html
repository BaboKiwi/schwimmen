<html>
    <head>
        <title>Schwimmen Online - Video</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="jquery-3.5.1.js"></script>
        <script src='https://meet.jit.si/external_api.js'></script>
        <style> 
            #video{
                /*                background-color: yellow;*/
                width: 100%;
                height: 100%;
            }
        </style>
    </head>
    <body>
        <div id="video"></div>
        <script>
            var url_string = window.location.href
            var url = new URL(url_string);
            var name = url.searchParams.get("name");

            var configOverwrite = {
                defaultLanguage: 'de',
//                    minParticipants: 1,
//                    disableInviteFunctions: true,
//                    prejoinPageEnabled: false
            };

            var options = {
                roomName: 'schwimmen-online-2020',
                width: "100%",
                height: "100%",
                parentNode: document.querySelector('#video'),
//                userInfo: {displayName: 'John Doe'},
                configOverwrite: configOverwrite,
                interfaceConfigOverwrite: {
//                    filmStripOnly: true,
//                    MOBILE_APP_PROMO: false,
                    HIDE_INVITE_MORE_HEADER: true,
//                    VERTICAL_FILMSTRIP: false,
//                    FILM_STRIP_MAX_HEIGHT: "12em"
                }
            };

            if (name !== undefined && name !== null && name !== 'null') {
                options.userInfo = {displayName: name};
                configOverwrite.prejoinPageEnabled = false;
            }

            var jitsiApi = new JitsiMeetExternalAPI('meet.jit.si', options);
            
            //          videoConferenceJoined
            //          videoConferenceLeft
            $(document).ready(function () {
                window.addEventListener('unload', function (event) {
                    jitsiApi.dispose();
                });
            });
        </script>    </body>
</html>
